# ===============================
# Обязательные секреты (задайте свои значения)
# ===============================
# Секретный ключ Django (обязателен в production).
DJANGO_SECRET_KEY=replace_with_long_random_secret
# Пароль Postgres для пользователя БД ниже.
POSTGRES_PASSWORD=replace_with_strong_db_password
# Имя базы данных Postgres.
POSTGRES_DB=replace_with_db_name
# Имя пользователя Postgres.
POSTGRES_USER=replace_with_db_user

# ===============================
# Режим работы и базовая безопасность
# ===============================
# 0 = production, 1 = debug.
DJANGO_DEBUG=0
# 0 = обычные парольные правила, 1 = ослабленные (только для dev).
DJANGO_RELAX_PASSWORDS=0
# 0 = запретить sqlite в production, 1 = разрешить.
DJANGO_ALLOW_SQLITE=0

# Разрешенные host-ы Django (через запятую).
DJANGO_ALLOWED_HOSTS=your-domain.com,www.your-domain.com
# Доверенные origin для CSRF (обязательно с https://).
DJANGO_CSRF_TRUSTED_ORIGINS=https://your-domain.com,https://www.your-domain.com
# Разрешенные origin для CORS (обязательно с https://).
DJANGO_CORS_ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
# Разрешить отправку cookie/credentials через CORS.
DJANGO_CORS_ALLOW_CREDENTIALS=1

# Публичный базовый URL backend для абсолютных ссылок.
DJANGO_PUBLIC_BASE_URL=https://your-domain.com
# TTL подписанных media URL в секундах.
DJANGO_MEDIA_URL_TTL_SECONDS=300
# Отдельный ключ подписи media URL (пусто = использовать DJANGO_SECRET_KEY).
DJANGO_MEDIA_SIGNING_KEY=

# Принудительный HTTPS и secure cookie в production.
DJANGO_SECURE_SSL_REDIRECT=1
DJANGO_SESSION_COOKIE_SECURE=1
DJANGO_CSRF_COOKIE_SECURE=1

# Уровень логирования: DEBUG, INFO, WARNING, ERROR.
DJANGO_LOG_LEVEL=INFO
# Максимальный размер upload в мегабайтах.
DJANGO_UPLOAD_MAX_MB=20

# ===============================
# Настройки базы данных
# ===============================
# Полный URL БД (если задан, DJANGO_DB_* игнорируются).
DATABASE_URL=
# Движок БД (режим явных полей подключения).
DJANGO_DB_ENGINE=django.db.backends.postgresql
# Имя БД (обычно совпадает с POSTGRES_DB).
DJANGO_DB_NAME=replace_with_db_name
# Пользователь БД (обычно совпадает с POSTGRES_USER).
DJANGO_DB_USER=replace_with_db_user
# Пароль БД (обычно совпадает с POSTGRES_PASSWORD).
DJANGO_DB_PASSWORD=replace_with_strong_db_password
# Хост БД (в docker-compose обычно "postgres").
DJANGO_DB_HOST=postgres
# Порт БД.
DJANGO_DB_PORT=5432
# Путь к sqlite (используется только если выбрана sqlite).
DJANGO_SQLITE_PATH=

# ===============================
# Redis / channels / доверенные прокси
# ===============================
# URL подключения к Redis.
REDIS_URL=redis://redis:6379/0
# Требовать Redis при старте приложения.
DJANGO_REQUIRE_REDIS=1
# Разрешить fallback на in-memory channels.
DJANGO_ALLOW_INMEMORY_CHANNEL_LAYER=0
# Явный список доверенных proxy IP (через запятую, опционально).
DJANGO_TRUSTED_PROXY_IPS=
# Доверенные proxy CIDR-диапазоны (пусто = использовать дефолт backend).
DJANGO_TRUSTED_PROXY_RANGES=

# ===============================
# Политика auth / chat / limits
# ===============================
# Лимит попыток auth (login/register) за окно.
AUTH_RATE_LIMIT=10
# Окно auth rate-limit в секундах.
AUTH_RATE_WINDOW=60
# Максимальная длина username (1..150).
USERNAME_MAX_LENGTH=30
# Максимальная длина сообщения.
CHAT_MESSAGE_MAX_LENGTH=1000
# Лимит отправки сообщений в WS.
CHAT_MESSAGE_RATE_LIMIT=20
# Окно лимита сообщений WS в секундах.
CHAT_MESSAGE_RATE_WINDOW=10
# Размер страницы сообщений по умолчанию.
CHAT_MESSAGES_PAGE_SIZE=50
# Максимальный размер страницы сообщений.
CHAT_MESSAGES_MAX_PAGE_SIZE=200
# Таймаут неактивности chat WS в секундах.
CHAT_WS_IDLE_TIMEOUT=600
# Regex для slug комнаты.
CHAT_ROOM_SLUG_REGEX=^[A-Za-z0-9_-]{3,50}$
# Соль для slug direct-комнат (пусто = использовать DJANGO_SECRET_KEY).
CHAT_DIRECT_SLUG_SALT=
# Лимит WS подключений (для endpoint/IP).
WS_CONNECT_RATE_LIMIT=60
# Окно лимита WS подключений в секундах.
WS_CONNECT_RATE_WINDOW=60

# ===============================
# Политика presence и direct inbox
# ===============================
# Тайминги presence в секундах.
PRESENCE_TTL=90
PRESENCE_GRACE=5
PRESENCE_HEARTBEAT=20
PRESENCE_IDLE_TIMEOUT=90
PRESENCE_TOUCH_INTERVAL=30
# Тайминги direct inbox в секундах.
DIRECT_INBOX_UNREAD_TTL=2592000
DIRECT_INBOX_ACTIVE_TTL=90
DIRECT_INBOX_HEARTBEAT=20
DIRECT_INBOX_IDLE_TIMEOUT=90
